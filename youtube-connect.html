<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YouTube Fan Account Connect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts: Manrope -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Manrope', sans-serif; 
      max-width: 400px; 
      margin: 50px auto; 
      text-align: center; 
      background-color: #121212; 
      color: #ffffff;
    }
    input, button { 
      width: 100%; 
      margin: 10px 0; 
      padding: 12px; 
      font-size: 16px; 
      border-radius: 8px;
      border: none;
      font-family: 'Manrope', sans-serif;
    }
    input {
      background-color: #1e1e1e;
      color: #ffffff;
    }
    input::placeholder {
      color: #aaaaaa;
    }
    button { 
      background: #cc0000; 
      color: white; 
      cursor: pointer; 
      font-weight: 600;
      transition: background 0.2s;
    }
    button:hover {
      background: #e60000;
    }
    #status {
      margin-top: 20px;
      font-size: 14px;
      color: #bbbbbb;
    }
  </style>
</head>
<body>
  <h2>üîó Connect Your YouTube Fan Account</h2>
  <p>Enter your Artist Name and click Connect</p>

  <input id="artist" placeholder="Artist Name" required>
  <button onclick="connectYouTube()">Connect with YouTube</button>

  <p id="status"></p>

  <script>
    // CONFIG: Replace these with your own
    const CLIENT_ID = "341856625967-0tr0774pb8obj2ukdco2d7bp6htnvlhd.apps.googleusercontent.com";
    const REDIRECT_URI = "https://script.google.com/macros/s/AKfycbyJ8iZBvxx6puIl5ff-hJ7zsOCAdvlVZdubgRmOwbQ4NHyt2WwkYymb5jj8RVbD7Q-x/exec"; // Web App URL from Apps Script
    const SCOPE = "https://www.googleapis.com/auth/youtube.readonly";

    function connectYouTube() {
      const artist = document.getElementById("artist").value.trim();
      const status = document.getElementById("status");
      if (!artist) {
        status.textContent = "‚ùå Please enter your Artist Name.";
        return;
      }

      status.textContent = "Redirecting to Google...";

      // state parameter = Artist Name, so we can retrieve it after OAuth
      const authUrl = `https://accounts.google.com/o/oauth2/v2/auth` +
        `?client_id=${CLIENT_ID}` +
        `&redirect_uri=${encodeURIComponent(REDIRECT_URI)}` +
        `&response_type=code` +
        `&scope=${encodeURIComponent(SCOPE)}` +
        `&access_type=offline` +    // ensures we get a refresh token
        `&prompt=consent` +         // forces approval first time
        `&state=${encodeURIComponent(artist)}`;

      // redirect to Google OAuth
      window.location.href = authUrl;
    }
  </script>
</body>
</html>
